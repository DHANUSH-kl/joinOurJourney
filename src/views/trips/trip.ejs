<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <!-- star  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">




    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />




    <link rel="stylesheet" href="/css/nav.css">
    <link rel="stylesheet" href="/css/account.css">
    <link rel="stylesheet" href="/css/trip.css">
    <title>Document</title>
</head>

<body>


    <nav>
        <div class="logo">
            <h4><b>TRAVELER</b></h4>
        </div>
        <div class="home">
            <a href="/aboutus">HOME</a>
            <a href="/">ALL TRIPS</a>
        </div>
        <div class="right">
            <img src="../images/bracc.png" alt="" class="account-icon">
            <!-- <img src="../images/search.png" alt=""> -->

            <div class="account-container acc-hide">
                <div class="close">
                    <i class="fa-solid fa-xmark" id="close"></i>
                </div>
                <div class="user-info-container">
                    <% if(!currUser) { %>
                        <p>USERNAME</p>
                        <% } else { %>
                            <div class="profile"></div>
                            <p>
                                <%= currUser.username %>
                            </p>
                            <% } %>
                </div>
                <div class="nav-links">
                    <a href="/mytrips">MY TRIP</a>
                    <a href="/createtrip">CREATE TRIP</a>
                    <a href="/">PAYMENTS AND PAYOUTS</a>
                    <a href="/user/signin">SIGN IN</a>
                    <a href="/user/signup">SIGN UP</a>
                </div>
            </div>

        </div>
    </nav>
    <hr>


    <main>
        <div class="main-container">

            <div class="title-container">
                <h1>
                    <%= trip.title %>
                </h1>
            </div>

            <div class="image-gallery">

                <div class="leftimg">
                    <img src=" <%= trip.tripImages[0].path %> " alt="">
                </div>
                <div class="rightimg">
                    <div class="imgtop">
                        <img src=" <%= trip.tripImages[1].path %> " alt="">
                    </div>
                    <div class="imgbott">
                        <img src=" <%= trip.tripImages[1].path %> " alt="">
                    </div>
                </div>
            </div>


            <div class="overview-container">
                <div class="duration ov-box">
                    <img src="../images/duration.png" alt="">
                    <div class="ov-details">
                        <p>Duration</p>
                        <p>
                            <%= trip.totalDays %> days
                        </p>
                    </div>
                </div>
                <div class="group ov-box">
                    <img src="../images/group.png" alt="">
                    <div class="ov-details">
                        <p>Group Size</p>
                        <p>
                            <%= trip.totalDays %> days
                        </p>
                    </div>
                </div>
                <div class="age ov-box">
                    <img src="../images/age.png" alt="">
                    <div class="ov-details">
                        <p>Ages</p>
                        <p>
                            <%= trip.totalDays %> days
                        </p>
                    </div>
                </div>
                <div class="language ov-box">
                    <img src="../images/lang.png" alt="">
                    <div class="ov-details">
                        <p>Languages</p>
                        <p>
                            <%= trip.totalDays %> days
                        </p>
                    </div>
                </div>
            </div>


            <div class="description">
                <h1>Tour Overview</h1>

                <p>
                    <%= trip.tripDescription %>
                </p>
            </div>


            <div class="includes-container">

                <h1>What's included</h1>


                <div class="iecontainer">

                    <div class="includes">

                        <% trip.includes.forEach(function(include) { %>
                            <div class="include">
                                <img src="../images/check.png" alt="1">
                                <p>
                                    <%= include %>
                                </p>

                            </div>

                            <% }) %>

                    </div>

                    <div class="excludes">

                        <% trip.excludes.forEach(function(include) { %>
                            <div class="include">
                                <img src="../images/cross.png" alt="1">
                                <p>
                                    <%= include %>
                                </p>


                            </div>

                            <% }) %>

                    </div>
                </div>

            </div>



            <div class="container">


                <div class="rightbox">
                    <div class="rb-container">
                        <ul class="rb">
                            <% trip.stopLocation.forEach(function(location, index) { %>
                                <li class="rb-item">
                                    <div class="stop-title">Day <%= index + 1 %> : <%= location
                                                || 'Location not available' %>
                                    </div>
                                    <div class="stop-image">
                                        <% if (trip.stopImages[index] && trip.stopImages[index].path) { %>
                                            <img src="<%= trip.stopImages[index].path %>" alt="">
                                            <% } else { %>
                                                <p>Image not available</p>
                                                <% } %>
                                    </div>
                                    <div class="stop-description">
                                        <%= trip.stopDescription[index] || 'Description not available' %>
                                    </div>
                                </li>
                                <% }); %>
                        </ul>
                    </div>
                </div>

            </div>


            <div class="customer-rev">
                <h1>Customer Reviews</h1>

                <% trip.reviews.forEach(review => { %>
                    <div class="review">
                        <div class="rev-name">
                            <div class="pfp"></div>
                            <p><%= review.name %></p>
                        </div>
                        <div class="rev-title">
                            <p><%= review.title %></p>
                        </div>
                        <div class="rev-description">
                            <p><%= review.comment %></p>
                        </div>


                        <% if (user && user._id.toString() === review.author.toString()) { %>
                            <form action="/reviews/<%= review._id %>/delete" method="POST" style="display:inline;">
                                <button type="submit" class="delete-button">Delete</button>
                            </form>
                        <% } %>



                    </div>
                <% }) %>
            </div>


            <div class="review-container">
                <h1>Leave a Reply</h1>
                <p class="revp">Your email address will not be published. Required fields are marked *</p>
                <form action="/<%= id %>/reviews" method="POST" id="reviewForm" class="reviews">


                    <!-- Location Rating -->
                    <div class="tstar">
                        <div class="locstar stars-cont">
                            <p>Location</p>
                            <div class="rate rat1">
                                <input type="radio" id="locStar5" name="locationRating" value="5" />
                                <label for="locStar5" title="5 stars">5 stars</label>
                                <input type="radio" id="locStar4" name="locationRating" value="4" />
                                <label for="locStar4" title="4 stars">4 stars</label>
                                <input type="radio" id="locStar3" name="locationRating" value="3" />
                                <label for="locStar3" title="3 stars">3 stars</label>
                                <input type="radio" id="locStar2" name="locationRating" value="2" />
                                <label for="locStar2" title="2 stars">2 stars</label>
                                <input type="radio" id="locStar1" name="locationRating" value="1" />
                                <label for="locStar1" title="1 star">1 star</label>
                            </div>
                        </div>

                        <!-- Amenities Rating -->
                        <div class="locstar stars-cont">
                            <p>Amenities</p>
                            <div class="rate rat1">
                                <input type="radio" id="amenitiesStar5" name="amenitiesRating" value="5" />
                                <label for="amenitiesStar5" title="5 stars">5 stars</label>
                                <input type="radio" id="amenitiesStar4" name="amenitiesRating" value="4" />
                                <label for="amenitiesStar4" title="4 stars">4 stars</label>
                                <input type="radio" id="amenitiesStar3" name="amenitiesRating" value="3" />
                                <label for="amenitiesStar3" title="3 stars">3 stars</label>
                                <input type="radio" id="amenitiesStar2" name="amenitiesRating" value="2" />
                                <label for="amenitiesStar2" title="2 stars">2 stars</label>
                                <input type="radio" id="amenitiesStar1" name="amenitiesRating" value="1" />
                                <label for="amenitiesStar1" title="1 star">1 star</label>
                            </div>
                        </div>

                        <!-- Food Rating -->
                        <div class="locstar stars-cont">
                            <p>Food</p>
                            <div class="rate rat1">
                                <input type="radio" id="foodStar5" name="foodRating" value="5" />
                                <label for="foodStar5" title="5 stars">5 stars</label>
                                <input type="radio" id="foodStar4" name="foodRating" value="4" />
                                <label for="foodStar4" title="4 stars">4 stars</label>
                                <input type="radio" id="foodStar3" name="foodRating" value="3" />
                                <label for="foodStar3" title="3 stars">3 stars</label>
                                <input type="radio" id="foodStar2" name="foodRating" value="2" />
                                <label for="foodStar2" title="2 stars">2 stars</label>
                                <input type="radio" id="foodStar1" name="foodRating" value="1" />
                                <label for="foodStar1" title="1 star">1 star</label>
                            </div>
                        </div>
                    </div>

                    <div class="bstar">
                        <!-- Room Rating -->
                        <div class="locstar stars-cont">
                            <p>Room</p>
                            <div class="rate rat1">
                                <input type="radio" id="roomStar5" name="roomRating" value="5" />
                                <label for="roomStar5" title="5 stars">5 stars</label>
                                <input type="radio" id="roomStar4" name="roomRating" value="4" />
                                <label for="roomStar4" title="4 stars">4 stars</label>
                                <input type="radio" id="roomStar3" name="roomRating" value="3" />
                                <label for="roomStar3" title="3 stars">3 stars</label>
                                <input type="radio" id="roomStar2" name="roomRating" value="2" />
                                <label for="roomStar2" title="2 stars">2 stars</label>
                                <input type="radio" id="roomStar1" name="roomRating" value="1" />
                                <label for="roomStar1" title="1 star">1 star</label>
                            </div>
                        </div>

                        <!-- Price Rating -->
                        <div class="locstar stars-cont">
                            <p>Price</p>
                            <div class="rate rat1">
                                <input type="radio" id="priceStar5" name="priceRating" value="5" />
                                <label for="priceStar5" title="5 stars">5 stars</label>
                                <input type="radio" id="priceStar4" name="priceRating" value="4" />
                                <label for="priceStar4" title="4 stars">4 stars</label>
                                <input type="radio" id="priceStar3" name="priceRating" value="3" />
                                <label for="priceStar3" title="3 stars">3 stars</label>
                                <input type="radio" id="priceStar2" name="priceRating" value="2" />
                                <label for="priceStar2" title="2 stars">2 stars</label>
                                <input type="radio" id="priceStar1" name="priceRating" value="1" />
                                <label for="priceStar1" title="1 star">1 star</label>
                            </div>
                        </div>

                        <!-- Tour Operator Rating -->
                        <div class="locstar stars-cont">
                            <p>Tour Operator</p>
                            <div class="rate rat1">
                                <input type="radio" id="operatorStar5" name="operatorRating" value="5" />
                                <label for="operatorStar5" title="5 stars">5 stars</label>
                                <input type="radio" id="operatorStar4" name="operatorRating" value="4" />
                                <label for="operatorStar4" title="4 stars">4 stars</label>
                                <input type="radio" id="operatorStar3" name="operatorRating" value="3" />
                                <label for="operatorStar3" title="3 stars">3 stars</label>
                                <input type="radio" id="operatorStar2" name="operatorRating" value="2" />
                                <label for="operatorStar2" title="2 stars">2 stars</label>
                                <input type="radio" id="operatorStar1" name="operatorRating" value="1" />
                                <label for="operatorStar1" title="1 star">1 star</label>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Fields -->
                    <div class="orow">
                        <input type="text" name="name" id="reviewerName" placeholder="Name" required>
                        <input type="email" name="email" id="reviewerEmail" placeholder="Email" required>
                    </div>
                    <div class="trow">
                        <input type="text" name="title" id="reviewTitle" placeholder="Title" required>
                    </div>
                    <textarea name="comment" placeholder="Comment" class="rcomment" required></textarea>

                    <button type="submit">Post Comment</button>


                </form>
            </div>


        </div>
    </main>





    <% if ( currUser && currUser._id.toString()==trip.owner._id.toString() ) { %>
        <form action="/<%= trip._id %>/?_method=DELETE" method="POST">
            <button>Delete</button>
        </form>
        <% } %>


            <% if ( currUser && currUser._id.toString()==trip.owner._id.toString() ) { %>
                <form action="/<%= trip._id %>/editTrip" method="GET">
                    <button>Edit</button>
                </form>
                <% } %>




                


                    <script src="/js/dropdown.js"></script>


                    <script src="/js/nav.js"></script>

                   



</body>

</html>